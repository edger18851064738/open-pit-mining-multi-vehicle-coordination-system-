露天矿多车协同调度系统 - 用户指南
目录
系统概述
安装与配置
系统组件说明
使用方法
命令行界面
系统监控
常见问题与解决方案
性能优化建议
系统概述
露天矿多车协同调度系统是一个专为露天矿山设计的智能运输车辆调度解决方案。系统主要实现以下功能：

多车辆协同调度与路径规划
基于时间窗的路径预约和冲突避免
装卸点优先级调度与资源分配
车辆状态监控与管理
任务动态分配与优化
系统采用模块化设计，包括地图服务、路径规划器、冲突检测模块、调度策略模块等核心组件，支持实际应用和模拟运行两种模式。

安装与配置
系统要求
Python 3.8或更高版本
以下Python库：
numpy
matplotlib
networkx
scipy
configparser
安装步骤
克隆或下载系统代码到本地目录
安装所需依赖库：
bash
pip install -r requirements.txt
配置系统参数（详见下节）
运行系统：
bash
python main.py
配置文件
系统使用config.ini配置文件进行参数设置，配置文件分为以下几个部分：

[MAP] - 地图和坐标系统配置
[DISPATCH] - 调度策略和关键点位置
[VEHICLE] - 车辆参数设置
[TASK] - 任务特性配置
[SIMULATION] - 模拟运行参数
[LOGGING] - 日志系统设置
首次运行系统时会自动生成默认配置文件，您可以根据实际需求调整参数。

配置示例：
ini
[MAP]
grid_size = 200             # 网格尺寸
grid_nodes = 50             # 网格密度
safe_radius = 30            # 安全区域半径
obstacle_density = 0.15     # 障碍物密度

[DISPATCH]
loading_points = [(-100,50), (0,150), (100,50)]   # 装载点坐标
unloading_point = (0,-100)                        # 卸载点坐标
parking_area = (200,200)                          # 停车场坐标
scheduling_interval = 2.0                         # 调度周期间隔(秒)
系统组件说明
核心组件
MapService (地图服务) - 管理坐标系统和地形信息
HybridPathPlanner (路径规划器) - 负责计算最优路径
ConflictBasedSearch (冲突检测) - 识别和解决路径冲突
TransportScheduler (运输调度器) - 实现任务分配策略
DispatchSystem (调度系统) - 协调各组件工作的中央控制器
MiningVehicle (矿用车辆) - 车辆实体模型
TransportTask (运输任务) - 任务实体模型
系统架构
+-------------------+       +-------------------+
|   DispatchSystem  |<----->| TransportScheduler|
+-------------------+       +-------------------+
         ^
         |
+--------v----------+       +-------------------+
| ConflictBasedSearch|<---->| HybridPathPlanner |
+-------------------+       +-------------------+
                                     ^
+-------------------+                |
|   MiningVehicle   |<---------------+
+-------------------+                |
         ^                           |
         |                           |
+--------v----------+       +--------v----------+
|   TransportTask   |       |    MapService     |
+-------------------+       +-------------------+
使用方法
基本使用流程
启动系统：运行main.py或show.py启动系统
系统初始化：系统自动加载配置、初始化地图和车辆
任务分配：系统根据调度策略自动为车辆分配任务
冲突处理：在检测到路径冲突时自动重新规划路径
系统监控：通过命令行界面或可视化界面监控系统运行状态
运行模式
系统支持两种运行模式：

模拟模式：使用虚拟环境和时间，适合系统测试和调优
bash
python show.py --simulation
实际应用模式：连接实际车辆和设备，用于现场部署
bash
python main.py --real-time
命令行界面
系统提供简单的命令行界面进行交互控制：

status - 显示系统当前状态
map - 显示ASCII格式的地图和车辆位置
add - 手动添加随机任务
move <id> <x> <y> - 直接调度指定车辆到目标位置
stats - 导出系统统计信息
quit - 退出系统
示例：

> status
系统状态 (时间: 14:30:25)
----------------------------------------
活动车辆: 3/5
排队任务: 2  活动任务: 3  已完成: 7

车辆状态分布:
  IDLE: 2辆
  EN_ROUTE: 3辆

装载点状态:
  装载点1: 1辆
  装载点2: 0辆
  装载点3: 0辆
  卸载点: 1辆
----------------------------------------

> map
当前地图布局：
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · P ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · L2 · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · L1 · · · · · · · · · · · · · · · · · · L3 · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · U · · · · · · · · · · · · · · · · · · · · · · · · ·
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
系统监控
性能指标
系统运行过程中会收集以下性能指标：

任务完成率：成功完成的任务百分比
平均响应时间：从任务创建到分配的平均时间
平均执行时间：从任务开始到完成的平均时间
冲突频率：每小时发生的路径冲突次数
冲突解决率：成功解决的冲突百分比
车辆利用率：各车辆工作时间百分比
可视化监控
系统模拟模式下提供实时可视化界面，显示以下信息：

地图和障碍物
装载点、卸载点和停车场位置
车辆实时位置和状态
计划路径和移动轨迹
任务信息和系统状态
Show Image

常见问题与解决方案
路径冲突过多
问题：系统报告大量路径冲突，影响车辆运行效率。

解决方案：

增加scheduling_interval参数值，减少调度频率
调整conflict_resolution_method为"priority"，优先保障重要车辆通行
增加装卸点之间的安全距离
任务分配不均衡
问题：部分车辆任务过多，其他车辆空闲。

解决方案：

将task_assignment_method设为"balanced"
增加task_priority参数的随机性
调整车辆初始位置分布
系统资源占用过高
问题：系统运行时CPU或内存使用率过高。

解决方案：

减少num_vehicles参数值
降低visualization_interval参数值减少绘图频率
设置log_level为"WARNING"减少日志输出
性能优化建议
路径规划优化：
增加路径缓存机制，避免重复计算
对常用路径预先计算并存储
调整A*算法的启发式函数
冲突检测优化：
使用空间分区技术减少检测范围
对静态障碍物和动态障碍物区分处理
优先处理高风险区域的冲突
调度策略优化：
根据历史数据动态调整任务优先级
使用机器学习技术预测车辆负载和运行时间
实现多目标优化算法综合考虑吞吐量和燃料消耗
系统配置优化：
根据实际场景调整grid_size和grid_nodes参数
合理设置scheduling_interval和visualization_interval
对大型矿场考虑使用分区域调度策略
